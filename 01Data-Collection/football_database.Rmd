---
title: "Football Database"
output: html_notebook
---

The data gathered with the football_data-script is already pretty clean.


```{r}
library(RSQLite)
```



## Missing Data

Maybe there are some full time results missing in the database.

```{r}
conn <- dbConnect(
  SQLite(), "C:/Users/ich/Documents/Football/01DataCollection/football.db"
)
```

```{r}
missing_results <- dbGetQuery(conn,
  "SELECT
    game_id,
	  leagues.fd_league AS Div,
	  leagues.league AS league,
	  season,
	  game_date,
	  hometeam.team AS hometeam,
	  awayteam.team AS awayteam,
	  FTHG,
	  FTAG,
	  FTR,
	  HTHG,
	  HTAG,
	  HTR
  FROM
	  games
  LEFT JOIN leagues ON games.league_id = leagues.league_id
  LEFT JOIN teams AS hometeam ON hometeam.team_id = games.hometeam_id 
  LEFT JOIN teams AS awayteam ON awayteam.team_id = games.awayteam_id
  WHERE FTHG IS NULL OR FTAG IS NULL;"  
)
```

```{r}
missing_results
```


The match Panathinaikos v Olympiakos on March 17th, 2019 had been interrupted because of fan riots. There is no official half time score. The game had been ruled as 0:3 in favor of Olympiakos. One could argue that the full time score should not be included in the database since the goals did not come about in a real match. But since the ruling is within the normal rules of the Greek league the score could also be included as a full time result.

The match Niki Volos v OFI on May 10th, 2015 had been cancelled.

```{r}
dbExecute(conn,
  "UPDATE games
  SET
    (FTHG, FTAG, FTR, HTHG, HTAG, HTR)
    = ('0', '3', 'A', NULL, NULL, NULL)
  WHERE game_id = 183433"
)
```

```{r}
dbDisconnect(conn)
```





